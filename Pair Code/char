use charBase
use calls
use listWithNumbers

end is nil

cin callback is
	bin function a to
	bin function b to
	bin function c to
	bin function d to
	bin function e to
	bin function f to 
	bin function g to
	bin function h to
	call1 callback char a b c d e f g h

cout c callback is
	give reverse c function c to
	bout head c function to give tail c function c to
	bout head c function to give tail c function c to
	bout head c function to give tail c function c to
	bout head c function to give tail c function c to
	bout head c function to give tail c function c to
	bout head c function to give tail c function c to
	bout head c function to give tail c function c to
	bout head c callback

ord c is normalize c

chr x is alignNumber x 8

sout s callback is
	if not s call0 callback
	cout head s function to
	sout tail s callback

writeln s callback is
	sout s function to
	cout \n callback

readln callback is
	cin function c to
	if eq c \n call1 callback nil
	readln function t to
	call1 callback list c t

readall callback is
	eof function eof to
	if eof call1 callback nil
	cin function c to
	readall function t to
	call1 callback pair c t


whiteSpaces is list \n list \t list \s nil


isLetter c is
	give ord c function c to
	either between c ord 'A' ord 'Z'
	between c ord 'a' ord 'z'

isDigit c is
	between ord c ord '0' ord '9'

coutfe c callback is
	forEach uncall bout reverse c callback

getLine callback is
	eof function e to 
	if e call1 callback emptyList
	cin function c to
	getLine function s to
	call1 callback pair c s

atoib s b result is 
	if not s then result
	atoib tail s b
		sum 
			mult result b 
			subtract ord head s ord '0'

atoi s is atoib s 10 0

itoabr x b is
	if not x then pair '0' nil
	give divide x b function p to
	give chr sum ord '0' second p function c to
	if first p 
	then pair c itoabr first p b
	else pair c nil

itoab x b is
	reverse itoabr x b

itoa x is itoab x 10

readNumber callback is
	eof function eof to
	if eof call1 callback nil
	cin function c to
	if not isDigit c call1 callback nil
	readNumber function t to
	call1 callback pair c t

readInt callback is
	readNumber function s to
	call1 callback atoi s